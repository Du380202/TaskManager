<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"> 
<head>
    <title>Portal - Bootstrap 5 Admin Dashboard Template For Developers</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">

</head> 

<body class="app">   	
  	
  	<th:block th:include="fragment/header"></th:block>
    
    <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">
			    
			    <h1 class="app-page-title">Overview</h1>
			    
			    <div class="app-card alert alert-dismissible shadow-sm mb-4 border-left-decoration" role="alert">
				    <div class="inner">
					    <div class="app-card-body p-3 p-lg-4">
						    <h3 class="mb-3"  th:text="'Welcome, '+${user.fullName}" ></h3>
						    <div class="row gx-5 gy-3">
						        <div class="col-12 col-lg-9">
							        
							        <div></div>
							    </div><!--//col-->
							    <div class="col-12 col-lg-3">
								    
							    </div><!--//col-->
						    </div><!--//row-->
						    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					    </div><!--//app-card-body-->
					    
				    </div><!--//inner-->
			    </div><!--//app-card-->
				    
			    <div class="row g-4 mb-4">
				    <div class="col-6 col-lg-3">
					    <div class="app-card app-card-stat shadow-sm h-100">
						    <div class="app-card-body p-3 p-lg-4">
							    <h4 class="stats-type mb-1">Projects</h4>
							    <div class="stats-figure"  th:text="${countPro}"></div>
							    <div class="stats-meta">
								    Open</div>
						    </div><!--//app-card-body-->
						    <a class="app-card-link-mask" href="#"></a>
					    </div><!--//app-card-->
				    </div><!--//col-->
				    
				    <div class="col-6 col-lg-3">
					    <div class="app-card app-card-stat shadow-sm h-100">
						    <div class="app-card-body p-3 p-lg-4">
							    <h4 class="stats-type mb-1">Tasks</h4>
							    <div class="stats-figure" th:text="${countTask}"></div>
							    <!-- <div class="stats-meta text-success">
								    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
</svg> 5% </div> -->
						    </div><!--//app-card-body-->
						    <a class="app-card-link-mask" href="#"></a>
					    </div><!--//app-card-->
				    </div><!--//col-->
				    <div class="col-6 col-lg-3">
					    <div class="app-card app-card-stat shadow-sm h-100">
						    <div class="app-card-body p-3 p-lg-4">
							    <h4 class="stats-type mb-1">Employees</h4>
							    <div class="stats-figure" th:text="${countUser}"></div>
						    </div><!--//app-card-body-->
						    <a class="app-card-link-mask" href="#"></a>
					    </div><!--//app-card-->
				    </div><!--//col-->
				    <!-- <div class="col-6 col-lg-3">
					    <div class="app-card app-card-stat shadow-sm h-100">
						    <div class="app-card-body p-3 p-lg-4">
							    <h4 class="stats-type mb-1">Tasks</h4>
							    <div class="stats-figure">6</div>
							    <div class="stats-meta">New</div>
						    </div>//app-card-body
						    <a class="app-card-link-mask" href="#"></a>
					    </div>//app-card
				    </div>//col -->
			    </div><!--//row-->
			    <div class="row g-4 mb-4">
			        <div class="col-12 col-lg-6">
				        <div class="app-card app-card-chart h-100 shadow-sm">
					        <div class="app-card-header p-3">
						        <div class="row justify-content-between align-items-center">
							        <div class="col-auto">
						                <h4 class="app-card-title">Pie Chart Project</h4>
							        </div><!--//col-->
							       
						        </div><!--//row-->
					        </div><!--//app-card-header-->
					        <div class="app-card-body p-3 p-lg-4">
						        <div class="chart-container">
				                    <canvas id="projectChart" ></canvas>
						        </div>
					        </div><!--//app-card-body-->
				        </div><!--//app-card-->
			        </div><!--//col-->
			        <div class="col-12 col-lg-6">
				        <div class="app-card app-card-chart h-100 shadow-sm">
					        <div class="app-card-header p-3">
						        <div class="row justify-content-between align-items-center">
							        <div class="col-auto">
						                <h4 class="app-card-title">Pie Chart Task</h4>
							        </div><!--//col-->
							        
						        </div><!--//row-->
					        </div><!--//app-card-header-->
					        <div class="app-card-body p-3 p-lg-4">
							    
						        <div class="chart-container">
				                    <canvas id="taskChart" style="width: 100px; height: 100px"></canvas>
						        </div>
					        </div><!--//app-card-body-->
				        </div><!--//app-card-->
			        </div><!--//col-->
			         <input type="hidden" id="completedTasks" th:value="${completedTasks}" />
               		<input type="hidden" id="incompleteTasks" th:value="${incompleteTasks}"/>
               		<input type="hidden" id="inCancelTasks" th:value="${inCancelTasks}"/>
               		
               		<input type="hidden" id="completedProjects" th:value="${completedProjects}" />
               		<input type="hidden" id="incompleteProjects" th:value="${incompleteProjects}"/>
               		<input type="hidden" id="inCancelProjects" th:value="${inCancelProjects}"/>
			    </div><!--//row-->
		    </div><!--//container-fluid-->
	    </div><!--//app-content-->
	        
    </div><!--//app-wrapper-->    					
	<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // Lấy giá trị từ các thẻ input ẩn
        var completedTasks = parseInt(document.getElementById('completedTasks').value, 10);
        var incompleteTasks = parseInt(document.getElementById('incompleteTasks').value, 10);
        var inCancelTasks = parseInt(document.getElementById('inCancelTasks').value, 10);

        var ctx = document.getElementById('taskChart').getContext('2d');
        var taskChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Completed Tasks', 'Incomplete Tasks', 'Cancel Tasks'],
                datasets: [{
                    data: [completedTasks, incompleteTasks, inCancelTasks],
                    backgroundColor: [
                        'rgba(21, 163, 98, 0.8)', // Green với độ trong suốt 0.2
                        'rgba(54, 162, 235, 0.8)', // Blue với độ trong suốt 0.2
                        'rgba(201, 203, 207, 0.8)' // Gray với độ trong suốt 0.2
                    ],
                    borderColor: [
                        'rgba(21, 163, 98, 1)', // Green với độ trong suốt 1
                        'rgba(54, 162, 235, 1)', // Blue với độ trong suốt 1
                        'rgba(201, 203, 207, 1)' // Gray với độ trong suốt 1
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    },
                }
            }
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // Lấy giá trị từ các thẻ input ẩn
        var completedTasks = parseInt(document.getElementById('completedProjects').value, 10);
        var incompleteTasks = parseInt(document.getElementById('incompleteProjects').value, 10);
        var inCancelTasks = parseInt(document.getElementById('inCancelProjects').value, 10);

        // Kiểm tra giá trị
        console.log('Completed Tasks:', completedTasks);
        console.log('Incomplete Tasks:', incompleteTasks);

        var ctx = document.getElementById('projectChart').getContext('2d');
        var taskChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Completed Projects', 'Incomplete Projects', 'Cancel Projects'],
                datasets: [{
                    data: [completedTasks, incompleteTasks, inCancelTasks],
                    backgroundColor: [
                        'rgba(21, 163, 98, 0.8)', // Green với độ trong suốt 0.2
                        'rgba(54, 162, 235, 0.8)', // Blue với độ trong suốt 0.2
                        'rgba(201, 203, 207, 0.8)' // Gray với độ trong suốt 0.2
                    ],
                    borderColor: [
                        'rgba(21, 163, 98, 1)', // Green với độ trong suốt 1
                        'rgba(54, 162, 235, 1)', // Blue với độ trong suốt 1
                        'rgba(201, 203, 207, 1)' // Gray với độ trong suốt 1
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    },
                }
            }
        });
    });
</script>
 
<th:block th:include="fragment/footer"></th:block>	

</body>
</html> 

